## comment this out if you need a different version of R, 
## and set set R_HOME accordingly as an environment variable
R_HOME :=       $(shell R RHOME)

month :=     Jan

##To Build everything, list everything
all: exampleReport.html ./data/$(month)_PROC.csv ./data/$(month)_RPTS

##Build Report from processed data and reprots/tables
exampleReport.html: ./data/$(month)_PROC.csv ./data/$(month)_RPTS ./R/5_Report.R ./R/exampleReport.Rmd
	Rscript ./R/5_Report.R
	echo $(month)

#built reports/tables from processeddata.csv
./data/$(month)_RPTS: ./data/$(month)_PROC.csv ./R/4_TablesPlots.R
	Rscript ./R/4_TablesPlots.R

##built clean data from processeddata.csv
./data/$(month)_PROC.csv: ./data/$(month)_CLN.csv ./R/3_LoadData.R
	Rscript ./R/3_LoadData.R

##build clean data from source data
./data/$(month)_CLN.csv: ./data/$(month)_SRC.csv ./R/2_CleanData.R
	Rscript ./R/2_CleanData.R

##build source data
./data/$(month)_SRC.csv: ./R/1_GetData.R
	Rscript ./R/1_GetData.R

##clean everything up
clean: 
  